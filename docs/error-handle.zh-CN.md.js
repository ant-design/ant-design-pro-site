webpackJsonp([80],{1097:function(n,s){n.exports={content:["article",["p","\u5728\u7528\u6237\u4f7f\u7528\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u9047\u5230\u5404\u79cd\u5f02\u5e38\u60c5\u51b5\uff0c\u6bd4\u5982\u9875\u9762404\uff0c\u7533\u8bf7\u7ed3\u679c\u5931\u8d25\uff0c\u8bf7\u6c42\u7684\u8fd4\u56de\u5f02\u5e38\u7b49\u7b49\uff0c\u8fd9\u7bc7\u6587\u6863\u4f1a\u6309\u7167\u62a5\u9519\u5f62\u5f0f\u7684\u4e0d\u540c\uff0c\u5206\u522b\u4ecb\u7ecd\u4e0b\u76f8\u5e94\u7684\u5904\u7406\u5efa\u8bae\u3002"],["h2","\u9875\u9762\u7ea7\u62a5\u9519"],["h3","\u5e94\u7528\u573a\u666f"],["ul",["li",["p","\u8def\u7531\u76f4\u63a5\u5f15\u5bfc\u5230\u62a5\u9519\u9875\u9762\uff0c\u6bd4\u5982\u4f60\u8f93\u5165\u7684\u7f51\u5740\u6ca1\u6709\u5339\u914d\u5230\u4efb\u4f55\u9875\u9762\uff0c\u53ef\u4ee5\u7531\u8def\u7531\u5f15\u5bfc\u5230\u9884\u8bbe\u7684 404 \u9875\u9762\u3002"]],["li",["p","\u4ee3\u7801\u63a7\u5236\u8df3\u8f6c\u5230\u62a5\u9519\u9875\u9762\uff0c\u6bd4\u5982\u6839\u636e\u8bf7\u6c42\u8fd4\u56de\u7684\u6570\u636e\uff0c\u5c06\u6ca1\u6709\u6743\u9650\u7684\u7528\u6237\u5f15\u5bfc\u5230 403 \u9875\u9762\u3002"]]],["h3","\u5b9e\u73b0"],["p","\u9488\u5bf9\u9875\u9762\u7ea7\u7684\u62a5\u9519\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u4e24\u4e2a\u4e1a\u52a1\u7ec4\u4ef6\u4f9b\u4f60\u9009\u62e9\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5b9e\u73b0\u4e00\u4e2a\u62a5\u9519\u9875\u9762\uff1a"],["ul",["li",["p",["a",{title:null,href:"https://preview.pro.ant.design/exception/404"},"Exception \u5f02\u5e38\u9875"]]]],["pre",{lang:"js",highlighted:'<span class="token operator">&lt;</span>Exception type<span class="token operator">=</span><span class="token string">"404"</span> <span class="token operator">/</span><span class="token operator">></span>'},["code",'<Exception type="404" />']],["p","\u9ed8\u8ba4\u652f\u6301 404\uff0c403\uff0c500 \u4e09\u79cd\u9519\u8bef\uff0c\u4e5f\u53ef\u81ea\u5b9a\u4e49\u6587\u6848\u7b49\u5185\u5bb9\u3002"],["ul",["li",["p",["a",{title:null,href:"https://preview.pro.ant.design/result/fail"},"Result \u7ed3\u679c\u9875"]]]],["pre",{lang:"js",highlighted:'  <span class="token operator">&lt;</span>Result\n    type<span class="token operator">=</span><span class="token string">"error"</span>\n    title<span class="token operator">=</span><span class="token string">"\u63d0\u4ea4\u5931\u8d25"</span>\n    description<span class="token operator">=</span><span class="token string">"\u8bf7\u6838\u5bf9\u5e76\u4fee\u6539\u4ee5\u4e0b\u4fe1\u606f\u540e\uff0c\u518d\u91cd\u65b0\u63d0\u4ea4\u3002"</span>\n    actions<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Button size<span class="token operator">=</span><span class="token string">"large"</span> type<span class="token operator">=</span><span class="token string">"primary"</span><span class="token operator">></span>\u8fd4\u56de\u4fee\u6539<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span><span class="token punctuation">}</span>\n  <span class="token operator">/</span><span class="token operator">></span>'},["code",'  <Result\n    type="error"\n    title="\u63d0\u4ea4\u5931\u8d25"\n    description="\u8bf7\u6838\u5bf9\u5e76\u4fee\u6539\u4ee5\u4e0b\u4fe1\u606f\u540e\uff0c\u518d\u91cd\u65b0\u63d0\u4ea4\u3002"\n    actions={<Button size="large" type="primary">\u8fd4\u56de\u4fee\u6539</Button>}\n  />']],["p","\u8fd9\u4e2a\u7ec4\u4ef6\u4e00\u822c\u7528\u5728\u63d0\u4ea4\u7ed3\u679c\u5c55\u793a\uff0c\u6587\u6848\u64cd\u4f5c\u7b49\u5747\u53ef\u81ea\u5b9a\u4e49\u3002"],["h2","\u63d0\u793a\u6027\u62a5\u9519"],["h3","\u5e94\u7528\u573a\u666f"],["ul",["li",["p","\u8868\u5355\u9879\u6821\u9a8c\u62a5\u9519\u3002"]],["li",["p","\u64cd\u4f5c\u53cd\u9988\u3002"]],["li",["p","\u7f51\u7edc\u8bf7\u6c42\u9519\u8bef\u3002"]]],["h3","\u5b9e\u73b0"],["p","\u5173\u4e8e\u8868\u5355\u9879\u62a5\u9519\uff0c\u8bf7\u53c2\u8003 ",["a",{title:null,href:"http://ant.design/components/form-cn/"},"antd Form"]," \u4e2d\u7684\u5b9e\u73b0\u3002\u5bf9\u4e8e\u64cd\u4f5c\u53cd\u9988\u548c\u7f51\u7edc\u8bf7\u6c42\u9519\u8bef\u63d0\u793a\uff0c\u6709\u4e00\u4e9b\u7ec4\u4ef6\u53ef\u80fd\u4f1a\u7528\u5230\uff1a"],["ul",["li",["p",["a",{title:null,href:"http://ant.design/components/alert-cn/"},"Alert"]]],["li",["p",["a",{title:null,href:"http://ant.design/components/message-cn/"},"message"]]],["li",["p",["a",{title:null,href:"http://ant.design/components/notification-cn/"},"notification"]]]],["p","\u5728\u5355\u9875\u5e94\u7528\u4e2d\uff0c\u6700\u5e38\u89c1\u7684\u9700\u6c42\u5c31\u662f\u5904\u7406\u7f51\u7edc\u9519\u8bef\u4fe1\u606f\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528 message \u548c notification \u6765\u5410\u51fa\u54cd\u5e94\u7684\u63a5\u53e3/\u7f51\u7edc/\u4e1a\u52a1\u6570\u636e\u9519\u8bef\u3002"],["p",["img",{src:"https://gw.alipayobjects.com/zos/rmsportal/cVTaurnfguplvNbctgBN.png",width:"400"}]],["p","Ant Design Pro \u5c01\u88c5\u4e86\u4e00\u4e2a\u5f3a\u5927\u7684 ",["code","request.js"]," \u7edf\u4e00\u5904\u7406\u8bf7\u6c42\uff0c\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u7684\u9519\u8bef\u5904\u7406\u4ee5\u53ca\u63d0\u793a\u3002"],["pre",{lang:"js",highlighted:'<span class="token keyword">const</span> checkStatus <span class="token operator">=</span> response <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> response<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> response<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">const</span> errortext <span class="token operator">=</span> codeMessage<span class="token punctuation">[</span>response<span class="token punctuation">.</span>status<span class="token punctuation">]</span> <span class="token operator">||</span> response<span class="token punctuation">.</span>statusText<span class="token punctuation">;</span>\n  notification<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    message<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`\u8bf7\u6c42\u9519\u8bef </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>response<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>response<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">,</span>\n    description<span class="token punctuation">:</span> errortext<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>errortext<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  error<span class="token punctuation">.</span>name <span class="token operator">=</span> response<span class="token punctuation">.</span>status<span class="token punctuation">;</span>\n  error<span class="token punctuation">.</span>response <span class="token operator">=</span> response<span class="token punctuation">;</span>\n  <span class="token keyword">throw</span> error<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>'},["code","const checkStatus = response => {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  }\n  const errortext = codeMessage[response.status] || response.statusText;\n  notification.error({\n    message: `\u8bf7\u6c42\u9519\u8bef ${response.status}: ${response.url}`,\n    description: errortext,\n  });\n  const error = new Error(errortext);\n  error.name = response.status;\n  error.response = response;\n  throw error;\n};"]],["p","\u4e3a\u4e86\u65b9\u4fbf\u5c55\u793a 404 \u7b49\u9875\u9762\uff0c\u6211\u4eec\u5728 ",["code","request.js"]," \u4e2d\u5c01\u88c5\u4e86\u6839\u636e\u72b6\u6001\u8df3\u8f6c\u5230\u76f8\u5e94\u9875\u9762\u7684\u903b\u8f91,\u5efa\u8bae\u5728\u7ebf\u4e0a\u73af\u5883\u4e2d\u5220\u9664\u8fd9\u4e2a\u903b\u8f91\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"],["pre",{lang:"js",highlighted:'    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> status <span class="token operator">=</span> e<span class="token punctuation">.</span>name<span class="token punctuation">;</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment" spellcheck="true">// @HACK</span>\n        <span class="token comment" spellcheck="true">/* eslint-disable no-underscore-dangle */</span>\n        window<span class="token punctuation">.</span>g_app<span class="token punctuation">.</span>_store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n          type<span class="token punctuation">:</span> <span class="token string">\'login/logout\'</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n      <span class="token comment" spellcheck="true">// environment should not be used</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token number">403</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">\'/exception/403\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">&lt;=</span> <span class="token number">504</span> <span class="token operator">&amp;&amp;</span> status <span class="token operator">>=</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">\'/exception/500\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">>=</span> <span class="token number">404</span> <span class="token operator">&amp;&amp;</span> status <span class="token operator">&lt;</span> <span class="token number">422</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">\'/exception/404\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>'},["code","    .catch(e => {\n      const status = e.name;\n      if (status === 401) {\n        // @HACK\n        /* eslint-disable no-underscore-dangle */\n        window.g_app._store.dispatch({\n          type: 'login/logout',\n        });\n        return;\n      }\n      // environment should not be used\n      if (status === 403) {\n        router.push('/exception/403');\n        return;\n      }\n      if (status <= 504 && status >= 500) {\n        router.push('/exception/500');\n        return;\n      }\n      if (status >= 404 && status < 422) {\n        router.push('/exception/404');\n      }\n    });"]],["p","\u5b8c\u6574\u4ee3\u7801\u53ef\u53c2\u8003\uff1a",["a",{title:null,href:"https://github.com/ant-design/ant-design-pro/blob/master/src/utils/request.js"},"https://github.com/ant-design/ant-design-pro/blob/master/src/utils/request.js"]]],meta:{order:17,title:{"en-US":"Error Handle","zh-CN":"\u9519\u8bef\u5904\u7406"},type:"\u8fdb\u9636",filename:"docs/error-handle.zh-CN.md"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#\u9875\u9762\u7ea7\u62a5\u9519",title:"\u9875\u9762\u7ea7\u62a5\u9519"},"\u9875\u9762\u7ea7\u62a5\u9519"]],["li",["a",{className:"bisheng-toc-h2",href:"#\u63d0\u793a\u6027\u62a5\u9519",title:"\u63d0\u793a\u6027\u62a5\u9519"},"\u63d0\u793a\u6027\u62a5\u9519"]]]}}});